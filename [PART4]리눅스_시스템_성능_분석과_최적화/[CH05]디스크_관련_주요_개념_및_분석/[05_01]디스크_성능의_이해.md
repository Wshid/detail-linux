## [05_01] 디스크 성능의 이해

### Disk IO
- 상당한 app 지연을 일으킬 수 있음
- Disk I/O 성능 개선 방법?

#### 하드디스크 -> SSD 교체
- 특히, **random 읽기 성능 개선**
  - e.g. 프로그램 로딩 속도 향상
- 처리량, IOPS 모두 우세함
- SSD의 **가격 이슈**로 여전히 HDD도 많이 사용됨
- HDD는 **대규모 스트리밍 데이터 저장**에서 많이 활용
  - SSD 대비 **절반 가격**
  - HDD의 약점은 **random read/write**
    - **연속적인 read/write에는 활용 가능**
    - 빅데이터는 sequencial한 정보가 많기 때문에 많이 사용됨

### I/O 스케줄러
- **block I/O** 성능을 향상 시키기 위해
  - **block I/O** 요청을 병합하고 정렬하는 역할 수행
    - e.g. block 3개를 1개로 합치기, 순서대로 정렬
- 지연된 **block I/O** 요청들에게
  - disk I/O 자원을 골고루 분배
- scheduler type
  - `deadline`: 각 I/O 요청의 시작 시간 보장
  - `cfq`: 완전히 공정한 대기열. ps가 I/O를 고정하게 할당
  - `noop`: 요청을 정렬하지 x
  - `none`: (멀티큐) 요청을 정렬하지 x
  - **`mq-deadline`**: (멀티큐) 각 I/O 요청의 시작 시간을 보장

#### 고려할 내용
- 탐색 시간이 비싸고, 같은 위치에 있는 요청을 병합하는 것이 최적인 **HDD**에 유용
  - **SSD**에는 효과가 적음
- 가상 환경에서는 **호스트가 자체 스케줄링**을 제공
- **클라우드 환경**에서는
  - workload가 `I/O bound`한 앱이 아닌 경우,
  - 어떤 스케줄러를 쓰던 극적인 효과를 보기는 힘듦
